<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Karrthik Madhavan — Portfolio</title>
  <meta name="description" content="Karrthik Madhavan — Data Analyst. Experience, Skills & Achievements, Certifications, and Hobbies."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#ffffff; --text:#0f172a; --muted:#475569; --border:#e5e7eb;
      --brand:#0BA360; --brand-2:#FF7A00; --brand-3:#13C26B; --ring: rgba(11,163,96,.25);
      --shadow: 0 10px 30px rgba(2,6,23,0.06); --radius: 0; /* sharp edges */
      --step: clamp(0.9rem, 1.2vw + 0.7rem, 1.2rem);           /* body */
      --step-1: clamp(1.1rem, 1.6vw + 0.6rem, 1.5rem);         /* h4 */
      --step-2: clamp(1.25rem, 2vw + 0.7rem, 1.8rem);          /* h3 */
      --step-3: clamp(1.5rem, 2.8vw + 0.6rem, 2.1rem);         /* h2 */
      --step-4: clamp(1.8rem, 4vw + 0.6rem, 2.8rem);           /* hero */
      --touch: 48px;                                           /* min touch target */
      --container: 1100px;
      --container-pad: clamp(16px, 3vw, 28px);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0; font: var(--step)/1.65 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial; color:var(--text); background:var(--bg)}
    a{color:var(--brand); text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:var(--container); margin:auto; padding:var(--container-pad)}

    /* Nav */
    .nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(160%) blur(8px); background:rgba(255,255,255,.96); border-bottom:1px solid var(--border)}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px var(--container-pad)}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:40px; height:40px; color:#fff; font-weight:800; display:grid; place-items:center; background:conic-gradient(from 180deg, var(--brand), var(--brand-3), var(--brand), var(--brand-2)); box-shadow: var(--shadow)}
    .brand h1{font-size: clamp(1rem, 1.4vw + .6rem, 1.25rem); margin:0}
    .menu{display:flex; gap:8px; flex-wrap:wrap}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border:1px solid var(--border); color:var(--text); background:#fff; min-height:var(--touch)}
    .pill.active{border-color:var(--brand); box-shadow:0 0 0 3px var(--ring)}
    .cta{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border:1px solid var(--brand); background:linear-gradient(135deg, var(--brand), var(--brand-3)); color:#fff; box-shadow:var(--shadow); min-height:var(--touch)}

    /* Shell */
    .hero{margin-top:18px; position:relative; overflow:hidden; background: linear-gradient(180deg, rgba(11,163,96,.06), rgba(255,122,0,.06)); border:1px solid var(--border); padding: clamp(20px, 4vw, 36px)}
    .big{font-size: var(--step-4); line-height:1.1; margin:0 0 8px}
    .sub{margin:0; color:var(--muted)}
    .chips{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .chip{padding:10px 14px; border:1px solid var(--border); background:#fff; font-size:1em; min-height:var(--touch)}

    section{margin: clamp(24px, 4vw, 40px) 0}
    h2{font-size: var(--step-3); margin:0 0 14px}
    .card{background:#fff; border:1px solid var(--border); padding: clamp(16px, 3vw, 24px); box-shadow:var(--shadow)}
    .muted{color:var(--muted)}
    .list{margin:8px 0 0; padding-left:20px}
    .grid{display:grid; gap: clamp(12px, 2.5vw, 20px)}
    .grid-2{grid-template-columns:1fr 1fr}
    @media(max-width:960px){.grid-2{grid-template-columns:1fr}}

    /* Roadmap: Vertical (desktop) / Horizontal (mobile) */
    .exp-wrap{display:grid; gap: clamp(12px, 2.5vw, 20px); grid-template-columns: 280px 1fr}
    @media(max-width:960px){.exp-wrap{grid-template-columns:1fr}}
    .years{position:relative; background:#fff; border:1px solid var(--border); padding:16px; box-shadow:var(--shadow)}
    .years .rail{position:absolute; left:28px; top:16px; bottom:16px; width:4px; background:linear-gradient(180deg, var(--brand), var(--brand-2));}
    .year-list{margin:0; padding:0 0 0 48px; list-style:none; max-height:520px; overflow:auto}
    .year-btn{display:flex; align-items:center; gap:10px; width:100%; text-align:left; padding:12px 14px; border:1px solid var(--border); background:#fff; cursor:pointer; min-height:var(--touch)}
    .year-btn[aria-pressed="true"]{border-color:var(--brand); box-shadow:0 0 0 3px var(--ring)}
    .indicator{position:absolute; left:20px; width:24px; height:24px; display:grid; place-items:center; background:#fff; border:1px solid var(--border); box-shadow:0 4px 12px rgba(0,0,0,.08); transition:top .24s ease, left .24s ease}
    .indicator svg{width:16px; height:16px; display:block}

    .details{background:#fff; border:1px solid var(--border); padding: clamp(14px, 2.5vw, 20px); box-shadow:var(--shadow)}
    .detail-year{display:inline-block; margin-bottom:8px; padding:8px 12px; border:1px solid var(--border); background:#fff; font-weight:600}
    .entry{padding:14px; border:1px dashed var(--border); margin-bottom:12px}
    .entry h4{margin:0 0 6px; font-size: var(--step-2)}
    .meta{color:var(--muted); font-size: .95em}

    /* Hobbies tabs */
    .tabs{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px}
    .tab{padding:10px 14px; border:1px solid var(--border); background:#fff; min-height:var(--touch)}
    .tab.active{border-color:var(--brand); box-shadow:0 0 0 3px var(--ring)}
    footer{margin:40px 0 16px; text-align:center; color:var(--muted)}

    /* Mobile tweaks: years become horizontal tabs with a bottom rail */
    @media(max-width:600px){
      .years{padding-bottom:28px}
      .year-list{display:flex; gap:8px; padding:0; overflow:auto; max-height:none}
      .year-list li{flex:0 0 auto}
      .year-btn{padding:10px 12px}
      .years .rail{left:0; right:0; height:4px; width:auto; bottom:12px; top:auto; background:linear-gradient(90deg, var(--brand), var(--brand-2))}
      .indicator{top:auto; bottom:2px; left:0}
    }
  </style>
</head>
<body>
  <noscript>
    <div class="container"><p>Please enable JavaScript to view the site.</p></div>
  </noscript>
  <div class="nav">
    <div class="nav-inner container">
      <div class="brand">
        <div class="logo" aria-hidden="true">KM</div>
        <h1>Karrthik Madhavan</h1>
      </div>
      <nav class="menu" aria-label="Primary">
        <a class="pill" data-link href="#/">Home</a>
        <a class="pill" data-link href="#/experience">Experience</a>
        <a class="pill" data-link href="#/skills">Skills & Achievements</a>
        <a class="pill" data-link href="#/certifications">Certifications</a>
        <a class="pill" data-link href="#/hobbies">Hobbies</a>
        <a class="cta" href="mailto:Karrthik.madhavan@irishrail.ie">Contact</a>
      </nav>
    </div>
  </div>

  <div class="container">
    <div id="app"><section class="hero"><p class="sub">Loading…</p></section></div>
    <footer><small>© <span id="y"></span> Karrthik Madhavan • Dublin, Ireland</small></footer>
  </div>

  <script>
  // Robust boot: guard against errors and always attempt to render
  (function(){
    try {
      document.getElementById('y').textContent = new Date().getFullYear();

      const app = document.getElementById('app');

      // --- Pages ---
      const pages = {
        home(){
          document.title = 'Home — Karrthik Madhavan';
          return [
            '<section class="hero">',
              '<p class="sub">Data Analytics • Power BI • Microsoft Fabric</p>',
              '<h2 class="big">I turn data into decisions with clean models, useful dashboards, and strong governance.</h2>',
              '<p class="muted">8+ years across transport & e‑commerce. Data Analyst at Iarnród Éireann (Irish Rail).</p>',
              '<div class="chips" aria-label="Focus areas">',
                '<span class="chip">Power BI (DAX/M/RLS)</span>',
                '<span class="chip">Microsoft Fabric (Lakehouse/Warehouse)</span>',
                '<span class="chip">Azure Synapse</span>',
                '<span class="chip">SQL & Python</span>',
                '<span class="chip">Governance & QA</span>',
              '</div>',
            '</section>'
          ].join('');
        },
        experience(){
          document.title = 'Experience — Karrthik Madhavan';
          return [
            '<section class="card">',
              '<h2>Experience — Yearly Roadmap</h2>',
              '<div class="exp-wrap">',
                '<aside class="years">',
                  '<div class="rail" aria-hidden="true"></div>',
                  '<ul id="expYears" class="year-list" aria-label="Years"></ul>',
                  '<div id="yearIndicator" class="indicator" aria-hidden="true"></div>',
                '</aside>',
                '<div id="expDetails" class="details" aria-live="polite"></div>',
              '</div>',
            '</section>'
          ].join('');
        },
        skills(){
          document.title = 'Skills & Achievements — Karrthik Madhavan';
          return [
            '<section class="card">',
            '<h2>Skills</h2>',
            '<div class="chips">',
              '<span class="chip">Power BI (DAX, M, RLS)</span>',
              '<span class="chip">Microsoft Fabric</span>',
              '<span class="chip">Azure Synapse</span>',
              '<span class="chip">SQL</span>',
              '<span class="chip">Python</span>',
              '<span class="chip">Dataflows Gen2</span>',
              '<span class="chip">PySpark</span>',
              '<span class="chip">Governance & QA</span>',
              '<span class="chip">Agile Delivery</span>',
              '<span class="chip">Stakeholder Engagement</span>',
            '</div>',
            '</section>',
            '<section class="card">',
              '<h2>Achievements</h2>',
              '<ul class="list">',
                '<li><strong>1,300% growth</strong> in active analytics users (2024 → P11 2025).</li>',
                '<li><strong>6,052 dashboard views</strong> by Period 11, 2025.</li>',
                '<li><strong>10+ leadership‑adopted dashboards</strong> delivered.</li>',
                '<li><strong>200+ ETL jobs automated</strong> at Amazon; +23% team productivity.</li>',
                '<li>Improved ML accuracy by <strong>+2.5%</strong> and coverage by <strong>+6.3%</strong>.</li>',
              '</ul>',
            '</section>'
          ].join('');
        },
        certifications(){
  document.title = 'Certifications & Education — Karrthik Madhavan';
  return [
    '<section class="card">',
      '<h2>Certifications</h2>',
      '<ul class="list">',
        '<li>Microsoft Certified: <strong>Power BI Data Analyst Associate (PL-300)</strong></li>',
        '<li>Lean and Six Sigma Principles — University of Limerick</li>',
        '<li>Certified Scrum Master (CSM)</li>',
        '<li>Fabric Analytics Engineer Associate (DP-600) — <em>in progress</em></li>',
        '<li>SAP Analytics Cloud — <em>in progress</em></li>',
      '</ul>',
    '</section>',
    '<section class="card">',
      '<h2>Education</h2>',
      '<ul class="list">',
        '<li><strong>MSc, Business Information & Analytics Systems</strong> — University College Cork (2021–2022, 1:1)</li>',
        '<li><strong>B.E., Electronics & Communication Engineering</strong> — Anna University (2013–2017, First Class)</li>',
      '</ul>',
    '</section>'
  ].join('');
}
,
        hobbies(sub){
          const tabs = ['tennis','badminton','boxing','photography','dinghy-sailing'];
          const names = {tennis:'Tennis',badminton:'Badminton',boxing:'Boxing',photography:'Photography','dinghy-sailing':'Dinghy Sailing'};
          const blocks = {
            tennis:'<p>League and social player; council member at Balrothery Tennis Club, Balbriggan.</p>',
            badminton:'<p>Regular club sessions; focus on footwork drills and reaction training.</p>',
            boxing:'<p>Fitness boxing for conditioning and discipline; pad work and bag routines.</p>',
            photography:'<p>Street and travel photography; Lightroom/Photoshop workflow with colour grading.</p>',
            'dinghy-sailing':'<p>Beginner to intermediate; keen on race rules, wind reading, and safety.</p>'
          };
          const active = tabs.indexOf(sub) !== -1 ? sub : 'tennis';
          document.title = 'Hobbies — ' + names[active] + ' — Karrthik Madhavan';
          return [
            '<section class="card">',
              '<h2>Hobbies</h2>',
              '<div class="tabs">',
                tabs.map(t=>'<a class="tab '+(t===active?'active':'')+'" href="#/hobbies/'+t+'">'+names[t]+'</a>').join(''),
              '</div>',
              '<div class="card" style="margin-top:10px">',
                '<h3 style="margin:0 0 6px">'+names[active]+'</h3>',
                blocks[active],
              '</div>',
            '</section>'
          ].join('');
        },
        notFound(){
          document.title = 'Not Found — Karrthik Madhavan';
          return '<section class="card"><h2>Page not found</h2><p class="muted">The page you requested does not exist.</p></section>';
        }
      };

      // --- Router ---
      function setActive(link){
        document.querySelectorAll('.pill').forEach(a=>a.classList.remove('active'));
        if(link) link.classList.add('active');
      }

      function render(){
        const hash = (location.hash || '').replace('#','');
        const parts = hash.split('/').filter(Boolean);
        let html = '';
        let active = null;
        if(parts.length === 0){
          html = pages.home();
          active = document.querySelector('a[href="#/"]');
        } else if(parts[0]==='experience'){
          html = pages.experience();
          active = document.querySelector('a[href="#/experience"]');
        } else if(parts[0]==='skills'){
          html = pages.skills();
          active = document.querySelector('a[href="#/skills"]');
        } else if(parts[0]==='certifications'){
          html = pages.certifications();
          active = document.querySelector('a[href="#/certifications"]');
        } else if(parts[0]==='hobbies'){
          html = pages.hobbies(parts[1]);
          active = document.querySelector('a[href="#/hobbies"]');
        } else {
          html = pages.notFound();
        }
        app.innerHTML = html;
        setActive(active);
        if(parts[0]==='experience') initExperience();
        window.scrollTo({top:0, behavior:'smooth'});
      }

      window.addEventListener('hashchange', render);
      if(!location.hash){ location.hash = '#/'; }

      // --- Experience data + init ---
      const experienceData = {
        2017: [{title:'Quality Analyst', company:'Amazon', org:'amazon', location:'Chennai', period:'Mar 2017 – Dec 2018', points:['Analytics & validation across retail catalogues','Built early automations to remove manual checks']}],
        2018: [{title:'Quality Analyst', company:'Amazon', org:'amazon', location:'Chennai', period:'All year', points:['Scaled QA playbooks and SOPs','Partnered with SDE/DS for data capture']}],
        2019: [{title:'Quality Lead (acting)', company:'Amazon', org:'amazon', location:'Chennai', period:'Jan – Dec 2019', points:['Led 12‑member team; productivity +23%','Vendor ramp (Accenture) to increase throughput']}],
        2020: [{title:'Senior Data Analyst – Quality Expert', company:'Amazon', org:'amazon', location:'Chennai', period:'Jul – Dec 2020', points:['BI/forecasting in Python, Tableau, QuickSight','Automated 200+ ETL with SQL & AWS']}],
        2021: [
          {title:'Senior Data Analyst – Quality Expert', company:'Amazon', org:'amazon', location:'Chennai', period:'Jan – Aug 2021', points:['FMEA & process optimisation; leadership dashboards']},
          {title:'Postgraduate Teaching Assistant', company:'University College Cork', org:'ucc', location:'Cork', period:'Oct – Dec 2021', points:['Supported BA & Web App Dev']}
        ],
        2022: [{title:'Postgraduate Teaching Assistant', company:'University College Cork', org:'ucc', location:'Cork', period:'Jan – Aug 2022', points:['Guided SQL, Python & viz; assessment support']}],
        2023: [{title:'Data Analyst — Data Analytics & Intelligence', company:'Iarnród Éireann (Irish Rail)', org:'irishrail', location:'Dublin', period:'Feb – Dec 2023', points:['KPI hubs for Finance & Engineering (CCE/CME)','Power BI governance & testing frameworks']}],
        2024: [{title:'Data Analyst — DAI', company:'Iarnród Éireann (Irish Rail)', org:'irishrail', location:'Dublin', period:'All year', points:['Active analytics users up 1,300% (2024→P11 2025)','Fabric adoption; model/perf optimisation']}],
        2025: [{title:'Data Analyst — DAI', company:'Iarnród Éireann (Irish Rail)', org:'irishrail', location:'Dublin', period:'To date', points:['6,052 total dashboard views by P11 2025','10+ leadership‑adopted dashboards']}]
      };

      function initExperience(){
        const yearsEl = document.getElementById('expYears');
        const detailsEl = document.getElementById('expDetails');
        const indicator = document.getElementById('yearIndicator');
        if(!yearsEl || !detailsEl || !indicator) return;

        const years = Object.keys(experienceData).map(Number).sort((a,b)=>b-a);
        yearsEl.innerHTML = years.map((y,i)=>
          '<li data-year="'+y+'" style="margin-bottom:8px">\
             <button class="year-btn" data-year="'+y+'" aria-pressed="'+(i===0)+'"><strong>'+y+'</strong></button>\
           </li>'
        ).join('');

        const mm = window.matchMedia('(max-width:600px)');
        function orgForYear(y){
          if(y>=2023) return 'irishrail';
          if(y>=2021 && y<=2022) return 'ucc';
          return 'amazon';
        }
        const svgs = {
          amazon: '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3c3.3 0 6 2.7 6 6 0 2.5-1.5 4.6-3.7 5.5-.3.1-.4.3-.3.6l.6 2.2c.1.4-.3.7-.6.5l-2.1-1.3c-.2-.1-.4-.1-.6 0l-2.1 1.3c-.3.2-.7-.1-.6-.5l.6-2.2c.1-.3 0-.5-.3-.6C7.5 13.6 6 11.5 6 9c0-3.3 2.7-6 6-6z"/></svg>',
          ucc: '<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="3" width="18" height="18" fill="currentColor"/></svg>',
          irishrail: '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 12h18M6 7l6 5-6 5"/></svg>'
        };

        function setIndicator(year){
          const btn = yearsEl.querySelector('button[data-year="'+year+'"]');
          if(!btn) return;
          const org = orgForYear(year);
          indicator.innerHTML = svgs[org];
          indicator.style.color = (org==='amazon')? '#FF9900' : (org==='ucc'? '#002663' : '#0BA360');
          const yearsContainer = yearsEl.closest('.years');
          const cBox = yearsContainer.getBoundingClientRect();
          const bBox = btn.getBoundingClientRect();
          if(mm.matches){
            // horizontal: center under the active button
            const left = (bBox.left - cBox.left) + (bBox.width/2) - (indicator.offsetWidth/2);
            indicator.style.left = left + 'px';
          } else {
            // vertical: center alongside the active button
            const top = (bBox.top - cBox.top) + (bBox.height/2) - (indicator.offsetHeight/2);
            indicator.style.top = top + 'px';
          }
        }

        function renderYear(y){
          const entries = experienceData[y]||[];
          detailsEl.innerHTML = '<span class="detail-year">'+y+'</span>' + entries.map(function(e){
            return '<div class="entry">\
              <h4>'+e.title+'</h4>\
              <div class="meta">'+e.company+' • '+e.location+' • '+e.period+'</div>\
              <ul class="list">'+ e.points.map(p=>'<'+'li>'+p+'</li>').join('') +'</ul>\
            </div>';
          }).join('');
          setIndicator(y);
        }

        // initial render
        renderYear(years[0]);

        yearsEl.addEventListener('click', function(e){
          const btn = e.target.closest('.year-btn');
          if(!btn) return;
          yearsEl.querySelectorAll('.year-btn').forEach(function(b){ b.setAttribute('aria-pressed','false'); });
          btn.setAttribute('aria-pressed','true');
          renderYear(+btn.dataset.year);
        });

        function reflowIndicator(){
          const pressed = yearsEl.querySelector('.year-btn[aria-pressed="true"]');
          if(pressed) setIndicator(+pressed.dataset.year);
        }
        yearsEl.addEventListener('keydown', function(e){
          const keys = ['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','Home','End'];
          if(keys.indexOf(e.key)===-1) return;
          const items = Array.from(yearsEl.querySelectorAll('.year-btn'));
          const i = items.indexOf(document.activeElement);
          let j = i;
          if(e.key==='ArrowUp' || e.key==='ArrowLeft') j = Math.max(0, i-1);
          if(e.key==='ArrowDown' || e.key==='ArrowRight') j = Math.min(items.length-1, i+1);
          if(e.key==='Home') j = 0;
          if(e.key==='End') j = items.length-1;
          items[j].focus();
          items.forEach(function(b){ b.setAttribute('aria-pressed','false'); });
          items[j].setAttribute('aria-pressed','true');
          renderYear(+items[j].dataset.year);
          e.preventDefault();
        });

        window.addEventListener('resize', reflowIndicator);
        mm.addEventListener('change', reflowIndicator);
      }{
        const yearsEl = document.getElementById('expYears');
        const detailsEl = document.getElementById('expDetails');
        const indicator = document.getElementById('yearIndicator');
        if(!yearsEl || !detailsEl || !indicator) return;

        const years = Object.keys(experienceData).map(Number).sort((a,b)=>b-a);
        yearsEl.innerHTML = years.map((y,i)=>
          '<li data-year="'+y+'" style="margin-bottom:8px">\
             <button class="year-btn" data-year="'+y+'" aria-pressed="'+(i===0)+'"><strong>'+y+'</strong></button>\
           </li>'
        ).join('');

        function orgForYear(y){
          if(y>=2023) return 'irishrail';
          if(y>=2021 && y<=2022) return 'ucc';
          return 'amazon';
        }

        const svgs = {
          amazon: '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3c3.3 0 6 2.7 6 6 0 2.5-1.5 4.6-3.7 5.5-.3.1-.4.3-.3.6l.6 2.2c.1.4-.3.7-.6.5l-2.1-1.3c-.2-.1-.4-.1-.6 0l-2.1 1.3c-.3.2-.7-.1-.6-.5l.6-2.2c.1-.3 0-.5-.3-.6C7.5 13.6 6 11.5 6 9c0-3.3 2.7-6 6-6z"/></svg>',
          ucc: '<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="3" width="18" height="18" fill="currentColor"/></svg>',
          irishrail: '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 12h18M6 7l6 5-6 5"/></svg>'
        };

        function setIndicator(year){
          const btn = yearsEl.querySelector('button[data-year="'+year+'"]');
          if(!btn) return;
          const org = orgForYear(year);
          indicator.innerHTML = svgs[org];
          indicator.style.color = (org==='amazon')? '#FF9900' : (org==='ucc'? '#002663' : '#0BA360');
          const yearsContainer = yearsEl.closest('.years');
          const containerBox = yearsContainer.getBoundingClientRect();
          const btnBox = btn.getBoundingClientRect();
          const offset = (btnBox.top - containerBox.top) + (btnBox.height/2);
          indicator.style.top = offset + 'px';
        }

        function renderYear(y){
          const entries = experienceData[y]||[];
          detailsEl.innerHTML = '<span class="detail-year">'+y+'</span>' + entries.map(function(e){
            return '<div class="entry">\
              <h4>'+e.title+'</h4>\
              <div class="meta">'+e.company+' • '+e.location+' • '+e.period+'</div>\
              <ul class="list">'+ e.points.map(p=>'<'+'li>'+p+'</li>').join('') +'</ul>\
            </div>';
          }).join('');
          setIndicator(y);
        }

        // initial render
        renderYear(years[0]);

        yearsEl.addEventListener('click', function(e){
          const btn = e.target.closest('.year-btn');
          if(!btn) return;
          yearsEl.querySelectorAll('.year-btn').forEach(function(b){ b.setAttribute('aria-pressed','false'); });
          btn.setAttribute('aria-pressed','true');
          renderYear(+btn.dataset.year);
        });

        yearsEl.addEventListener('keydown', function(e){
          const keys = ['ArrowUp','ArrowDown','Home','End'];
          if(keys.indexOf(e.key)===-1) return;
          const items = Array.from(yearsEl.querySelectorAll('.year-btn'));
          const i = items.indexOf(document.activeElement);
          let j = i;
          if(e.key==='ArrowUp') j = Math.max(0, i-1);
          if(e.key==='ArrowDown') j = Math.min(items.length-1, i+1);
          if(e.key==='Home') j = 0;
          if(e.key==='End') j = items.length-1;
          items[j].focus();
          items.forEach(function(b){ b.setAttribute('aria-pressed','false'); });
          items[j].setAttribute('aria-pressed','true');
          renderYear(+items[j].dataset.year);
          e.preventDefault();
        });

        window.addEventListener('resize', function(){
          const pressed = yearsEl.querySelector('.year-btn[aria-pressed="true"]');
          if(pressed) setIndicator(+pressed.dataset.year);
        });
      }

      // First render
      render();

    } catch(err){
      const app = document.getElementById('app');
      if(app){ app.innerHTML = '<section class="card"><h2>Something went wrong</h2><p class="muted">'+(err.message||err)+'</p></section>'; }
      console.error(err);
    }
  })();
  </script>
</body>
</html>
